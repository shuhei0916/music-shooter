# Roo への開発ガイドライン

このファイルは、AIエンジニア「Roo」がこのプロジェクトで開発を行う際のルールや方針をまとめたものです。Rooは作業を開始する際に、まずこのファイルを読み込み、内容を遵守するよう努めます。

## 0. ゲームの概要
MusicShooterは、音楽の演奏をもとに、自動で弾丸である音符を発射するarrow a rowライクなラン系ゲーム。プレイヤーは走りながら、敵を倒し曲の完走（完奏）を目指す。プレイヤーが直接入力する音ゲーとは異なり、「すでに演奏された音符」に着目し、BGMに同期して自動攻撃が行われるという設計思想。自動攻撃であることから、vampire survivors系のゲームとも近いが、2次元のマップを移動するのではなく、直線状のマップを走る（temple runなどと近い）。

## 1. ワークフロー

- **一つの変更、一つのコミット:** 機能追加、バグ修正、リファクタリングなど、一つの論理的な変更が完了したら、都度コミットを作成してください。
- **TODOリストの活用:** 現在のタスク状況は、Rooが管理するTODOリスト（リマインダー）で追跡します。ユーザーからの指示に基づき、Rooがリストを更新します。

## 2. コーディング規約 (GDScript)

- **命名規則:**
    - 変数名と関数名: `snake_case` (例: `player_speed`, `_handle_input()`)
    - クラス名（スクリプトファイル名）: `PascalCase` (例: `PlayerController.gd`) ※Godotの標準に従い、ファイル名は`snake_case`でも可とします。
    - シグナル名: `past_tense` (例: `hp_changed`, `game_over_signal`)
- **型ヒント:** GDScriptの静的型付けを積極的に利用してください。変数や関数の定義には、可能な限り型ヒントを追加します。(例: `var speed: float = 5.0`, `func attack(damage: int) -> void:`)
- **コメント:** 複雑なロジックや、意図が分かりにくいコードには、その「なぜ」を説明するコメントを簡潔に残してください。

## 3. Godot ベストプラクティス

- **シーン間の通信:** ノード間の密結合を避けるため、可能な限り**シグナル**を使用してください。`get_node()` で直接他ノードを参照する方法は、親子関係にあるなど、密接な場合に限定します。
- **グローバルスクリプト（シングルトン）:** `SceneManager` や `SongManager` のようなグローバルスクリプトは、ゲーム全体の状態管理や、シーンをまたいで利用される機能に限定して使用します。

## 4. コミットメッセージ

- **規約:** [Conventional Commits](https://www.conventionalcommits.org/) に従います。
    - `feat:`: 新機能の追加
    - `fix:`: バグ修正
    - `docs:`: ドキュメントの変更
    - `style:`: コードのフォーマット変更（動作に影響しないもの）
    - `refactor:`: リファクタリング
    - `test:`: テストの追加・修正
    - `chore:`: ビルドプロセスや補助ツールの変更など

---
このガイドラインは、必要に応じていつでも更新できます。